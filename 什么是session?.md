---
aliases: [session,]
---

**Session用来维护用户的状态**。当用户首次访问一个使用session机制的应用程序时，服务器会在请求报文中附带一个由服务器随机生成的session ID，以及可能的user ID，这些信息用于标识当前用户。

```
HTTP/1.1 200 OK
Set-Cookie: sessionID=abc123
Content-Type: text/html
```

服务器端会将这些标识信息存储在[[什么是Cookie?|cookie]]中，然后将cookie作为一部分响应报文发送回浏览器。
浏览器接收到响应后，会将这个cookie保存在用户的浏览器中。这样，在用户下次发送请求时，浏览器会自动在请求的首部中加入这些存储在cookie中的信息。
```
POST /login HTTP/1.1 
Host: example.com 
Cookie: sessionID=abc123 
Content-Type: application/x-www-form-urlencoded
```

当服务器端接收到一个带有session信息的请求时，它会使用session ID去查询它维护的session数据存储。服务器会根据这个session ID找到对应的用户状态数据，然后根据需要进行记录、更新或存储相应的用户数据。这使得服务器能够在用户不同的请求之间保持一致的状态。

## 工作流程:
![[IMG_0160 1.png]]
<!--ID: 1693151867251-->


1. **用户浏览商品：** 您登录到在线购物网站，开始浏览不同的商品页面。
2. **服务器创建会话：** 当您首次访问网站时，服务器会为您创建一个会话，并分配一个唯一的会话ID。这个会话ID可能被存储在Cookie中。
3. **添加商品到购物车：** 您选择了几件商品并将它们添加到购物车。<u>每次您添加商品时，客户端会将会话ID随请求一起发送给服务器。</u>
4. **服务器存储购物车内容：** 服务器接收到请求，并根据会话ID将您的购物车内容存储在会话数据中。<u>会话数据可能存储在内存中，数据库中，或者其他持久性存储中。</u>
5. **继续浏览：** 您继续浏览其他商品，点击不同的页面，每次请求都会包含会话ID。
6. **结算：** 您决定进行结算。服务器会根据会话ID获取您购物车中的商品，并生成结算页面。
7. **清除会话：** 在您完成结算后，服务器可以从会话中清除购物车数据。会话数据可能会在某个时间点过期，或者在用户注销登录时清除。